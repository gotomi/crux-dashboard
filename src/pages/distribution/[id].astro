---
import fs from 'node:fs/promises';

import Layout from '$layouts/Layout.astro'

// Component Imports
import MetricsByUrl from '$components/MetricsByUrl.astro';
import Header from '$components/Header.astro';

let title = 'CrUX Dashboard - distribution';

export async function getStaticPaths() {
  return [
    { params: { id: 'origin' } },
    { params: { id: 'home' } },
  ];
}
const {id} = Astro.request.params;

const url = new URL(`../../_data/crux-${id}.json`, import.meta.url);
const json = await fs.readFile(url, 'utf-8');
const data = JSON.parse(json);


---
<Layout title={title}>
  
   <main>
        <header>
            <div>
                <h1>{title}</h1>
                <Header params={data.params}/>
            </div>
        </header>
        <section>
            <MetricsByUrl data = {data}/>
        </section>
    </main>
</Layout>